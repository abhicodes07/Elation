{% load static %}
<div class="md:px-5 px-3 py-3 flex flex-col w-full fixed z-30 items-center">
  <div x-data="{ open: false }" class="w-full">
    <nav
      class="poppins-regular rounded-lg w-full bg-gray-300/50 backdrop-blur-sm transition-colors duration-500 ease-in-out dark:bg-[#292929]/50 dark:backdrop-blur-2xl"
      id="nav-bar">
      <div class="px-4 py-4 flex items-center justify-between">
        <!-- Logo -->
        <a class="flex items-center" href="{% url "" %}">
          <img src="{% static 'assets/elation.png' %}" alt="Elation" class="md:h-12 h-10 w-30 md:w-36 block dark:hidden" />
          <img src="{% static 'assets/elation_white.png' %}" alt="Elation" class="md:h-12 h-10 w-30 md:w-36 hidden dark:block" />
        </a>

        <!-- Desktop Nav Links -->
        <div class="poppins-regular text-vagus justify-between hidden lg:flex items-center xl:text-sm text-[10px] dark:text-warp-heading">
          <div class="relative group">
            <div class="flex mx-3 items-center relative group cursor-pointer">
              <span>Specific Disorder</span>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                class="size-5 group-hover:rotate-90 transition duration-300">
                <path fill-rule="evenodd"
                  d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z"
                  clip-rule="evenodd" />
              </svg>
            </div>

            <!-- Dropdown -->
            <div x-data="{ startY: 0, scrollTop: 0 }"
              @touchstart="startY = $event.touches[0].clientY; scrollTop = $refs.list.scrollTop"
              @touchmove="let moveY = $event.touches[0].clientY; $refs.list.scrollTop = scrollTop + (startY - moveY)"
              class="nav-drop absolute overflow-y-auto group text-sm top-full left-0 w-max opacity-0 invisible group-hover:visible group-hover:translate-y-1.5 transition-all duration-300 ease-in-out transform flex-col group-hover:opacity-100 bg-white dark:bg-charcoal rounded-[25px] shadow-lg px-6 py-4 text-left space-y-4 max-h-72 custom-scroll"
              x-ref="list">
              <ul class="justify-between items-center w-48">
                <li>
                  <a href="{% url 'depression' %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Depression
                    <span>›</span></a>
                </li>
                <li>
                  <a href="{% url "eating_disorder" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Eating Disorder
                    <span>›</span></a>
                </li>
                <li>
                  <a href="{% url "hypochondriasis" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Hypochondriasis<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "mood_disorder" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Mood
                    Disorder<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "ocd" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">OCD<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "postpartum" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Postpartum<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "personality" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Personality
                    Disorder<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "phobia" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Phobia<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "psychosis" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Psychosis<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "ptsd" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">PTSD<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "schizophrenia" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Schizophrenia<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "adhd" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">ADHD<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "autistic" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Autistic<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "abuse" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Abuse<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "addiction" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Addiction<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "self_regulation" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Self-Regulation<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "lgbtq" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">LGBTQ<span>›</span></a>
                </li>
              </ul>
            </div>
          </div>

          <div class="relative group">
            <a href="#" class="flex mx-3 items-center">
              Life & Work
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                class="size-5 group-hover:rotate-90 transition duration-300">
                <path fill-rule="evenodd"
                  d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z"
                  clip-rule="evenodd" />
              </svg>
            </a>

            <!-- Dropdown --> 
            <div class="nav-drop absolute group text-sm top-full left-0 w-max opacity-0 invisible group-hover:visible group-hover:translate-y-2 transition-all duration-300 ease-in-out transform flex-col group-hover:opacity-100 bg-white dark:bg-charcoal rounded-[25px] shadow-lg px-6 py-4 text-left space-y-4">
              <ul class="justify-between items-center w-48">
                <li>
                  <a href="{% url "crisis_intervention" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Crisis
                    Intervention<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "existential_crisis" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Extential
                    Crisis<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "trauma" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Trauma<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "chronic_illness" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Chronic
                    Illness<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "suicidal_tendencies" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Suicidal
                    Tendencies<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "burnout" %}"
                    class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Burnout<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "boosting_productivity" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Boosting
                    Productivity<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "career_coaching" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Career
                    Coaching<span>›</span></a>
                </li>
              </ul>
            </div>
          </div>

          <div class="relative group">
            <a href="#" class="flex mx-3 items-center">
              Relationship
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                class="size-5 group-hover:rotate-90 transition duration-300">
                <path fill-rule="evenodd"
                  d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z"
                  clip-rule="evenodd" />
              </svg>
            </a>

            <!-- Dropdown -->
            <div
              class="nav-drop absolute group text-sm top-full left-0 w-max opacity-0 invisible group-hover:visible group-hover:translate-y-2 transition-all duration-300 ease-in-out transform flex-col group-hover:opacity-100 bg-white dark:bg-charcoal rounded-[25px] shadow-lg px-6 py-4 text-left space-y-4">
              <ul class="justify-between items-center w-48">
                <li>
                  <a href="{% url "couples_counselling" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Couples
                    Counselling<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "divorce_counselling" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Divorce
                    Counselling<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "family_counselling" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Family
                    Counselling<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "infertility_counselling" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Infertillity
                    Counselling<span>›</span></a>
                </li>
                <li>
                  <a href="{% url "parental_counselling" %}" class="hover:text-gray-500 py-2 flex justify-between items-center w-48">Sexual
                    Intimacy<span>›</span></a>
                </li>
              </ul>
            </div>
          </div>

          <div class="relative group">
            <a href="#" class="flex mx-3 items-center">Therapist</a>
          </div>

          <div class="relative group">
            <a href="#" class="flex mx-3 items-center">Plans</a>
          </div>

          <div class="h-6 border-l border-back mx-2"></div>

          <div class="relative group">
            <a href="#" class="flex mx-3 items-center">Business</a>
          </div>

          <div class="relative group">
            <a href="#" class="flex mx-3 items-center">The Advice Room</a>
          </div>
        </div>

        <!-- Login + Mobile Menu Button -->
        <div class="flex items-center space-x-4">
          <a href="#" class="text-lg poppins-regular ease-in-out transition-colors duration-300 py-1 px-2 text-vagus dark:text-warp-heading dark:rounded-sm dark:hover:bg-warp-subhead/30">Login</a>
          <button onclick="toggleDarkMode()" class="cursor-pointer transition duration-300 ease-in-out rounded-full p-1 hover:text-blue-600 dark:text-warp-heading dark:rounded-sm dark:hover:text-warp-heading dark:hover:rotate-90">
            {% comment %} sun {% endcomment %}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 hidden dark:block">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
            </svg>

            {% comment %} moon {% endcomment %}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 block dark:hidden">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
            </svg>
          </button>

          {% comment %} burgir {% endcomment %}
          <button @click="open = true" aria-label="open menu" class="lg:hidden cursor-pointer transition ease-in-out duration-300 p-1 dark:rounded-sm dark:text-warp-heading dark:hover:bg-warp-subhead/30">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5M12 17.25h8.25" />
            </svg>
          </button>
        </div>
      </div>
    </nav>

    {% comment %} sidebar overlay {% endcomment %}
    <div x-show="open" class="fixed inset-0 z-40 backdrop-blur-sm dark:backdrop-blur-none" @click="open = false" x-transition.opacity>
    </div>

    <!-- Sidebar -->
    <aside x-show="open" x-transition:enter="transition transform ease-out duration-300"
      x-transition:enter-start="-translate-y-48" x-transition:enter-end="translate-y-0"
      x-transition:leave="transition transform ease-in duration-200" x-transition:leave-start="translate-y-0"
      x-transition:leave-end="-translate-y-full"
      class="fixed top-6 left-1/2 -translate-x-1/2 w-[90%] bg-white rounded-xl h-fit shadow-lg z-50 p-6 space-y-4 dark:bg-charcoal/50 dark:backdrop-blur-xl"
      id="compact-nav">

      <!-- Close Button -->
      <div class="flex justify-between items-center">
        <a class="flex items-center" href="/">
          <img src="{% static 'assets/elation.png' %}" alt="Elation" class="md:h-12 h-8 w-22 md:w-36 dark:hidden block" />
          <img src="{% static 'assets/elation_white.png' %}" alt="Elation" class="md:h-12 h-8 w-22 md:w-36 hidden dark:block" />
        </a>
        <button @click="open = false" class="flex cursor-pointer items-center text-vagus transition ease-in-out duration-300 dark:rounded-sm dark:p-1 dark:text-warp-heading dark:hover:bg-warp-subhead/30" aria-label="Close menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <div class="border-t-1 border-vagus/30 my-4 dark:border-warp-heading/30"></div>

      <!-- Navigation Links -->
      <nav class="space-y-3 grid justify-center text-center poppins-regular uppercase text-vagus dark:text-warp-heading">
        <a href="#" class="block ease-in-out transition-colors duration-150 hover:text-warp-subhead">Home</a>
        <a href="#" class="block ease-in-out transition-colors duration-150 hover:text-warp-subhead">Specific Disorder</a>
        <a href="#" class="block ease-in-out transition-colors duration-150 hover:text-warp-subhead">Life & Work</a>
        <a href="#" class="block ease-in-out transition-colors duration-150 hover:text-warp-subhead">Relationship</a>
        <a href="#" class="block ease-in-out transition-colors duration-150 hover:text-warp-subhead">Therapist</a>
        <a href="#" class="block ease-in-out transition-colors duration-150 hover:text-warp-subhead">Plans</a>
        <a href="#" class="block ease-in-out transition-colors duration-150 hover:text-warp-subhead">Business</a>
        <a href="#" class="block ease-in-out transition-colors duration-300 hover:text-warp-subhead">The Advice Room</a>
      </nav>
    </aside>
  </div>
</div>

